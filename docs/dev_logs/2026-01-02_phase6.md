# Work Log 2026-01-02 (Phase 6 MVP)
- Scope: Phase 6 MVP finish (docs, analytics no-op, light E2E, Lighthouse, screenshots, release guide).
- Change: README + docs/TEST_PROCEDURE updated with Docker-only Playwright command (v1.57.0) and node_modules volume note.
- Change: docker-compose.yml frontend uses named volume `frontend_node_modules` for /app/node_modules.
- Change: frontend analytics no-op added; track() wired in Search/SakeDetail/Favorites/Recent/useFavorites.
- Change: Playwright config + smoke test added; CI runs `pnpm exec playwright` with browser install.
- Change: Playwright smoke test retries favorites refresh to wait for IndexedDB persistence.
- Change: Playwright smoke navigates via SPA links to avoid full reload before favorites persist.
- Change: Playwright smoke seeds favorites in IndexedDB to stabilize CI offline checks.
- Change: Added Playwright initScript seed helper + screenshots spec (docs/screenshots output).
- Change: Added Lighthouse CI config (frontend/lighthouserc.cjs) and scripts (lh:ci).
- Change: Added docs/RELEASE_GUIDE.md and refreshed README/TEST_PROCEDURE for Phase 6.
- Change: CI now caches Playwright browsers and uploads Lighthouse/screenshot artifacts; removed pnpm --force.
- Change: Added @lhci/cli via docker compose (pnpm-lock.yaml updated).
- Change: docker-compose.dev.yml VITE_API_BASE_URL now defaults to localhost to avoid backend:8000 resolution errors.
- Change: docker-compose.dev.yml backend port aligned to 18000:8000 to match frontend env/docs.
- Change: backend/alembic.ini script_location aligned for Docker.
- Test: Playwright Docker v1.57.0-jammy (1 passed).
- Test: Playwright Docker smoke (search -> detail -> favorites -> offline) passed after initScript seeding.
- Test: Frontend lint/typecheck/build in Docker (pass).
- Test: Backend pytest + seed in Docker (5 passed).
- Issue: Vite import error for @tanstack/react-query due to missing node_modules; fixed via named volume + pnpm install in same compose.
- Issue: Playwright "command not found" resolved by CLI direct call (node node_modules/@playwright/test/cli.js).
- Pending: Manual browser verification, Lighthouse report, screenshots.
